<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Jojo Tea Shoppe - Home</title>
    <script>
        // Load version.js and other resources with proper caching
        (function() {
            // First, fetch version.js to extract version number
            fetch('version.js?t=' + Date.now())
                .then(response => response.text())
                .then(text => {
                    // Extract version number from version.js content
                    const match = text.match(/window\.APP_VERSION\s*=\s*['"]([^'"]+)['"]/);
                    const version = match ? match[1] : Date.now();
                    
                    // Execute version.js code
                    eval(text);
                    
                    // Load version.js with version number for proper caching (for future loads)
                    const versionScript = document.createElement('script');
                    versionScript.src = 'version.js?v=' + version;
                    document.head.appendChild(versionScript);
                    
                    // Load CSS with version
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = 'home.css?v=' + version;
                    document.head.appendChild(link);
                })
                .catch(() => {
                    // Fallback: use timestamp if fetch fails
                    const version = Date.now();
                    const versionScript = document.createElement('script');
                    versionScript.src = 'version.js?v=' + version;
                    document.head.appendChild(versionScript);
                    
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = 'home.css?v=' + version;
                    document.head.appendChild(link);
                });
        })();
    </script>

</head>
<body>
<header class="header christmas-header">
    <div class="header-title-container">
        <img src="logo.png" alt="JOJO TEA SHOPPE Logo" class="header-logo">
        <h1 class="header-title">
            <span class="title-line">Welcome to</span>
            <span class="christmas-accent">JOJO TEA SHOPPE</span>
        </h1>
    </div>
    <div class="header-buttons">
        <button class="order-button" id="orderButton">Order Now</button>
        <button class="download-button" id="downloadButton">Download App</button>
    </div>
</header>

<!-- Container for the Top Scroll View -->
<iframe id="topScrollView" width="100%" height="400px" style="border: none; background: transparent;"></iframe>

<!-- Container for the Tag Scroll View -->
<iframe id="tagScrollView" width="100%" height="" style="border: none; margin-top: 20px; background: transparent;"></iframe>

<!-- Container for the Product Details -->
<!-- Container for the Product Details (Modal) -->
<div id="productDetails" class="modal">
    <button id="closeButton" class="close-button">X</button>
    <div class="product-image-container">
        <img id="productImage" src="" alt="Product Image" class="product-image">
        <button class="product-order-button" id="productOrderButton">Order Now</button>
    </div>
    <iframe id="productDetailFrame" width="100%" height="500px" style="border: none; display: none;"></iframe>
</div>

<!-- Order Selection Modal -->
<div id="orderModal" class="modal">
    <div class="order-modal-content">
        <button id="closeOrderModal" class="close-button">X</button>
        <h2>Choose Order Type</h2>
        <div class="order-options">
            <button class="order-option-btn" id="instoreOption">
                <span class="order-icon">üè™</span>
                <span class="order-text">In-Store</span>
            </button>
            <button class="order-option-btn" id="deliveryOption">
                <span class="order-icon">üöö</span>
                <span class="order-text">Delivery</span>
            </button>
        </div>
    </div>
</div>

<!-- Footer Section -->
<footer class="footer">
    <div class="footer-left">
        <iframe id="envslideView" width="100%" height="500px" style="border: none; margin-top: 20px; background: transparent;"></iframe>
    </div>

    <div class="footer-right">
        <div id="deliveryButtons" class="delivery-buttons" style="display: none;">
            <h3>Order Delivery:</h3>
            <div class="delivery-platforms">
                <a href="https://www.doordash.com/en/store/jojo-tea-shoppe-rancho-cucamonga-27910420/33325176/?event_type=autocomplete&pickup=false" class="delivery-btn" id="doordashBtn" target="_blank">
                    <img src="images/doordash.png" alt="DoorDash" class="platform-icon-img">
                    <span class="platform-name">DoorDash</span>
                </a>
                <a href="https://www.ubereats.com/store/jojo-tea-shoppe/GuvZABxtQkyZf02idtI3kg?diningMode=DELIVERY&sc=SEARCH_SUGGESTION" class="delivery-btn" id="uberBtn" target="_blank">
                    <img src="images/uber.png" alt="Uber Eats" class="platform-icon-img">
                    <span class="platform-name">Uber Eats</span>
                </a>
                <a href="https://www.grubhub.com/restaurant/jojo-tea-shoppe-9779-base-line-rd-rancho-cucamonga/7936968" class="delivery-btn" id="grubhubBtn" target="_blank">
                    <img src="images/grubhub.png" alt="Grubhub" class="platform-icon-img">
                    <span class="platform-name">Grubhub</span>
                </a>
                <a href="https://www.fantuanorder.com/store/Restaurant/us-19640?rTraceId=s-1-1-1996744853299470350" class="delivery-btn" id="fantuanBtn" target="_blank">
                    <img src="images/fantuan.png" alt="Fantuan" class="platform-icon-img">
                    <span class="platform-name">Fantuan</span>
                </a>
            </div>
        </div>
        <p>PHONE: 909-244-0245</p>
        <p>ADDRESS: 9779 Base Line Rd, Rancho Cucamonga, CA</p>
        <div class="social-media">
            <h4>Follow Us:</h4>
            <div class="social-links">
                <a href="https://www.yelp.com/biz/jojo-tea-shoppe-rancho-cucamonga-3" class="social-btn" target="_blank" title="Yelp">
                    <img src="images/yelp.png" alt="Yelp" class="social-icon-img">
                    <span class="social-name">Yelp</span>
                </a>
                <a href="https://www.instagram.com/jojo_tea_shoppe/" class="social-btn" target="_blank" title="Instagram">
                    <img src="images/ins.jpg" alt="Instagram" class="social-icon-img">
                    <span class="social-name">Instagram</span>
                </a>
                <a href="https://www.tiktok.com/@jojoteashoppe" class="social-btn" target="_blank" title="TikTok">
                    <img src="images/tiktok.png" alt="TikTok" class="social-icon-img">
                    <span class="social-name">TikTok</span>
                </a>
            </div>
        </div>
        <iframe id="googleAddressView" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d206.43792875355794!2d-117.59169386420321!3d34.12057410411273!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80c33663e2ee35bb%3A0xe72701fa9a9307e5!2s9779%20Base%20Line%20Rd%2C%20Rancho%20Cucamonga%2C%20CA%2091730!5e0!3m2!1sen!2sus!4v1710142341773!5m2!1sen!2sus"
                width="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
</footer>

<!-- Christmas Snowflakes -->
<div id="snowflakes-container"></div>

<script>
    // Set iframe sources with version to bust cache on deployment
    const version = window.APP_VERSION || Date.now();
    document.getElementById('topScrollView').src = 'top_scroll_view.html?v=' + version;
    document.getElementById('tagScrollView').src = 'tag_scroll_view.html?v=' + version;
    document.getElementById('envslideView').src = 'envslide.html?v=' + version;
    
    // Load home.js with version
    const script = document.createElement('script');
    script.src = 'home.js?v=' + version;
    document.body.appendChild(script);
</script>
</body>
</html>